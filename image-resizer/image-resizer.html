<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”»åƒãƒªã‚µã‚¤ã‚ºï¼†å“è³ªèª¿æ•´ãƒ„ãƒ¼ãƒ« - Pokoro Tools</title>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Q3F3DJ865S"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-Q3F3DJ865S');
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/browser-image-compression@2.0.2/dist/browser-image-compression.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
    <script src="/related-tools-config.js"></script>
    <script src="/RelatedTools.js"></script>
</head>
<body class="bg-gray-50 dark:bg-gray-900">
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useRef, useEffect } = React;
        
        const ImageResizer = () => {
            const [originalFile, setOriginalFile] = useState(null);
            const [originalPreview, setOriginalPreview] = useState('');
            const [resizedFile, setResizedFile] = useState(null);
            const [resizedPreview, setResizedPreview] = useState('');
            const [width, setWidth] = useState('');
            const [quality, setQuality] = useState(80);
            const [format, setFormat] = useState('keep');
            const [isDragOver, setIsDragOver] = useState(false);
            const [isProcessing, setIsProcessing] = useState(false);
            const [error, setError] = useState('');
            const [downloadMessage, setDownloadMessage] = useState('');
            const [history, setHistory] = useState([]);
            const fileInputRef = useRef(null);

            const MAX_FILE_SIZE = 10 * 1024 * 1024; // 10MB
            const SUPPORTED_FORMATS = ['image/jpeg', 'image/png', 'image/webp'];

            // å±¥æ­´ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰èª­ã¿è¾¼ã¿
            useEffect(() => {
                const savedHistory = localStorage.getItem('imageResizerHistory');
                if (savedHistory) {
                    try {
                        setHistory(JSON.parse(savedHistory));
                    } catch (e) {
                        setHistory([]);
                    }
                }
            }, []);

            // ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã‚’ KB ã§è¡¨ç¤º
            const formatFileSize = (bytes) => {
                return (bytes / 1024).toFixed(1) + ' KB';
            };

            // ç”»åƒã®è‡ªç„¶ã‚µã‚¤ã‚ºã‚’å–å¾—
            const getImageDimensions = (file) => {
                return new Promise((resolve) => {
                    const img = new Image();
                    img.onload = () => {
                        resolve({ width: img.naturalWidth, height: img.naturalHeight });
                    };
                    img.src = URL.createObjectURL(file);
                });
            };

            // ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†
            const handleFile = async (selectedFile) => {
                setError('');
                setResizedFile(null);
                setResizedPreview('');
                
                if (!selectedFile) return;

                // ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãƒã‚§ãƒƒã‚¯
                if (selectedFile.size > MAX_FILE_SIZE) {
                    setError(`ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒå¤§ãã™ãã¾ã™ï¼ˆæœ€å¤§ ${MAX_FILE_SIZE / 1024 / 1024}MBï¼‰`);
                    return;
                }

                // å½¢å¼ãƒã‚§ãƒƒã‚¯
                if (!SUPPORTED_FORMATS.includes(selectedFile.type)) {
                    setError('å¯¾å¿œã—ã¦ã„ãªã„å½¢å¼ã§ã™ï¼ˆJPEG, PNG, WebP ã®ã¿å¯¾å¿œï¼‰');
                    return;
                }

                setOriginalFile(selectedFile);

                // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ä½œæˆ
                const reader = new FileReader();
                reader.onload = (e) => {
                    setOriginalPreview(e.target.result);
                };
                reader.readAsDataURL(selectedFile);

                // ç”»åƒã®å¹…ã‚’å–å¾—ã—ã¦ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã«è¨­å®š
                try {
                    const dimensions = await getImageDimensions(selectedFile);
                    setWidth(dimensions.width.toString());
                } catch (err) {
                    console.error('ç”»åƒã‚µã‚¤ã‚ºã®å–å¾—ã«å¤±æ•—:', err);
                }
            };

            // ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—å‡¦ç†
            const handleDragOver = (e) => {
                e.preventDefault();
                setIsDragOver(true);
            };

            const handleDragLeave = (e) => {
                e.preventDefault();
                setIsDragOver(false);
            };

            const handleDrop = (e) => {
                e.preventDefault();
                setIsDragOver(false);
                
                const droppedFile = e.dataTransfer.files[0];
                handleFile(droppedFile);
            };

            const handleFileSelect = (e) => {
                const selectedFile = e.target.files[0];
                handleFile(selectedFile);
            };

            // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
            const isValidWidth = () => {
                const w = parseInt(width);
                return !isNaN(w) && w > 0 && w <= 10000;
            };

            const isValidQuality = () => {
                return quality >= 0 && quality <= 100;
            };

            // ãƒªã‚µã‚¤ã‚ºå‡¦ç†
            const handleResize = async () => {
                if (!originalFile || !isValidWidth() || !isValidQuality()) {
                    setError('æœ‰åŠ¹ãªå¹…ã¨å“è³ªã‚’æŒ‡å®šã—ã¦ãã ã•ã„');
                    return;
                }

                setIsProcessing(true);
                setError('');

                try {
                    const targetWidth = parseInt(width);
                    const targetQuality = quality / 100;

                    // å‡ºåŠ›å½¢å¼æ±ºå®š
                    let outputType = originalFile.type;
                    if (format !== 'keep') {
                        outputType = `image/${format}`;
                    }

                    // åœ§ç¸®ã‚ªãƒ—ã‚·ãƒ§ãƒ³
                    const options = {
                        maxWidthOrHeight: targetWidth,
                        useWebWorker: true,
                        fileType: outputType
                    };

                    // JPEG/WebP ã®å ´åˆã®ã¿å“è³ªè¨­å®š
                    if (outputType === 'image/jpeg' || outputType === 'image/webp') {
                        options.quality = targetQuality;
                    }

                    // ç”»åƒåœ§ç¸®
                    const compressedFile = await imageCompression(originalFile, options);

                    // ãƒ•ã‚¡ã‚¤ãƒ«åç”Ÿæˆ
                    const originalName = originalFile.name.split('.').slice(0, -1).join('.');
                    const extension = outputType.split('/')[1];
                    const newFileName = `${originalName}_w${targetWidth}.${extension}`;

                    // æ–°ã—ã„Fileã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
                    const renamedFile = new File([compressedFile], newFileName, {
                        type: outputType,
                        lastModified: Date.now()
                    });

                    setResizedFile(renamedFile);

                    // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ä½œæˆ
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        setResizedPreview(e.target.result);
                    };
                    reader.readAsDataURL(renamedFile);

                    // å±¥æ­´ã«è¿½åŠ 
                    addToHistory({
                        originalName: originalFile.name,
                        originalSize: originalFile.size,
                        resizedName: renamedFile.name,
                        resizedSize: renamedFile.size,
                        width: targetWidth,
                        quality: quality,
                        format: format,
                        timestamp: Date.now()
                    });

                } catch (err) {
                    setError('ç”»åƒã®å‡¦ç†ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + err.message);
                } finally {
                    setIsProcessing(false);
                }
            };

            // å±¥æ­´ã«è¿½åŠ 
            const addToHistory = (item) => {
                const newHistory = [item, ...history.slice(0, 2)];
                setHistory(newHistory);
                localStorage.setItem('imageResizerHistory', JSON.stringify(newHistory));
            };

            // ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å‡¦ç†
            const handleDownload = () => {
                if (!resizedFile) return;

                const url = URL.createObjectURL(resizedFile);
                const link = document.createElement('a');
                link.href = url;
                link.download = resizedFile.name;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);

                setDownloadMessage('Downloaded!');
                setTimeout(() => setDownloadMessage(''), 1500);
            };

            // ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
            const handleFileButtonClick = () => {
                fileInputRef.current?.click();
            };

            // ã‚¯ãƒªã‚¢å‡¦ç†
            const handleClear = () => {
                setOriginalFile(null);
                setOriginalPreview('');
                setResizedFile(null);
                setResizedPreview('');
                setWidth('');
                setError('');
                if (fileInputRef.current) {
                    fileInputRef.current.value = '';
                }
            };

            return React.createElement('div', {
                className: "min-h-screen bg-gradient-to-br from-purple-50 to-pink-100 dark:from-gray-900 dark:to-gray-800"
            }, [
                // ãƒ˜ãƒƒãƒ€ãƒ¼
                React.createElement('header', {
                    key: 'header',
                    className: "bg-white dark:bg-gray-800 shadow-sm"
                }, 
                    React.createElement('div', {
                        className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"
                    }, [
                        React.createElement('div', {
                            key: 'nav',
                            className: "mb-4"
                        }, 
                            React.createElement('a', {
                                key: 'back',
                                href: '/',
                                className: "inline-flex items-center text-indigo-600 hover:text-indigo-700 dark:text-indigo-400 dark:hover:text-indigo-300 transition-colors"
                            }, [
                                React.createElement('svg', {
                                    key: 'arrow',
                                    className: "w-5 h-5 mr-2",
                                    fill: "none",
                                    stroke: "currentColor",
                                    viewBox: "0 0 24 24"
                                },
                                    React.createElement('path', {
                                        strokeLinecap: "round",
                                        strokeLinejoin: "round",
                                        strokeWidth: 2,
                                        d: "M15 19l-7-7 7-7"
                                    })
                                ),
                                'ãƒ„ãƒ¼ãƒ«ä¸€è¦§ã«æˆ»ã‚‹'
                            ])
                        ),
                        React.createElement('h1', {
                            key: 'title',
                            className: "text-3xl font-bold text-gray-900 dark:text-white text-center"
                        }, [
                            React.createElement('span', {
                                key: 'icon',
                                className: "mr-3"
                            }, 'ğŸ–¼ï¸'),
                            'ç”»åƒãƒªã‚µã‚¤ã‚ºï¼†å“è³ªèª¿æ•´ãƒ„ãƒ¼ãƒ«'
                        ]),
                        React.createElement('p', {
                            key: 'subtitle',
                            className: "text-center text-gray-600 dark:text-gray-300 mt-2"
                        }, 'ç”»åƒã®ã‚µã‚¤ã‚ºã¨å“è³ªã‚’èª¿æ•´ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰')
                    ])
                ),

                // ãƒ¡ã‚¤ãƒ³
                React.createElement('main', {
                    key: 'main',
                    className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"
                }, [
                    // ãƒ¡ã‚¤ãƒ³ã‚¨ãƒªã‚¢
                    React.createElement('div', {
                        key: 'main-area',
                        className: "grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"
                    }, [
                        // å…¥åŠ›ã‚¨ãƒªã‚¢
                        React.createElement('div', {
                            key: 'input-area',
                            className: "bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6"
                        }, [
                            React.createElement('h2', {
                                key: 'input-title',
                                className: "text-xl font-semibold text-gray-800 dark:text-white mb-6"
                            }, 'ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰'),

                            // ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—é ˜åŸŸ
                            React.createElement('div', {
                                key: 'drop-zone',
                                onDragOver: handleDragOver,
                                onDragLeave: handleDragLeave,
                                onDrop: handleDrop,
                                className: `border-2 border-dashed rounded-lg p-8 text-center transition-colors mb-6 ${
                                    isDragOver 
                                        ? 'border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20' 
                                        : 'border-gray-300 dark:border-gray-600 hover:border-indigo-400 dark:hover:border-indigo-500'
                                }`
                            }, [
                                React.createElement('svg', {
                                    key: 'upload-icon',
                                    className: "mx-auto h-12 w-12 text-gray-400 dark:text-gray-500 mb-4",
                                    stroke: "currentColor",
                                    fill: "none",
                                    viewBox: "0 0 48 48"
                                },
                                    React.createElement('path', {
                                        d: "M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",
                                        strokeWidth: 2,
                                        strokeLinecap: "round",
                                        strokeLinejoin: "round"
                                    })
                                ),
                                React.createElement('p', {
                                    key: 'drop-text',
                                    className: "text-gray-600 dark:text-gray-300 mb-2"
                                }, 'ç”»åƒã‚’ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—'),
                                React.createElement('p', {
                                    key: 'or-text',
                                    className: "text-gray-500 dark:text-gray-400 text-sm mb-4"
                                }, 'ã¾ãŸã¯'),
                                React.createElement('button', {
                                    key: 'file-button',
                                    onClick: handleFileButtonClick,
                                    className: "px-6 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 dark:bg-indigo-500 dark:hover:bg-indigo-600 transition-colors"
                                }, 'ç”»åƒã‚’é¸æŠ'),
                                React.createElement('input', {
                                    key: 'file-input',
                                    ref: fileInputRef,
                                    type: 'file',
                                    accept: 'image/jpeg,image/png,image/webp',
                                    onChange: handleFileSelect,
                                    className: 'hidden'
                                }),
                                React.createElement('p', {
                                    key: 'format-info',
                                    className: "text-xs text-gray-500 dark:text-gray-400 mt-2"
                                }, 'JPEG, PNG, WebPï¼ˆæœ€å¤§10MBï¼‰')
                            ]),

                            // ã‚ªãƒ—ã‚·ãƒ§ãƒ³
                            originalFile && React.createElement('div', {
                                key: 'options',
                                className: "space-y-6"
                            }, [
                                React.createElement('h3', {
                                    key: 'options-title',
                                    className: "text-lg font-medium text-gray-800 dark:text-white"
                                }, 'ãƒªã‚µã‚¤ã‚ºã‚ªãƒ—ã‚·ãƒ§ãƒ³'),

                                // å¹…è¨­å®š
                                React.createElement('div', {
                                    key: 'width-setting'
                                }, [
                                    React.createElement('label', {
                                        key: 'width-label',
                                        className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
                                    }, 'å¹… (px)'),
                                    React.createElement('input', {
                                        key: 'width-input',
                                        type: 'number',
                                        value: width,
                                        onChange: (e) => setWidth(e.target.value),
                                        min: '1',
                                        max: '10000',
                                        className: `w-full p-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${
                                            width && !isValidWidth() ? 'border-red-500 dark:border-red-400' : 'border-gray-300 dark:border-gray-600'
                                        }`
                                    })
                                ]),

                                // å“è³ªè¨­å®š
                                React.createElement('div', {
                                    key: 'quality-setting'
                                }, [
                                    React.createElement('label', {
                                        key: 'quality-label',
                                        className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
                                    }, `å“è³ª (${quality}%)`),
                                    React.createElement('input', {
                                        key: 'quality-slider',
                                        type: 'range',
                                        min: '0',
                                        max: '100',
                                        value: quality,
                                        onChange: (e) => setQuality(parseInt(e.target.value)),
                                        className: "w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer slider"
                                    }),
                                    React.createElement('div', {
                                        key: 'quality-badges',
                                        className: "flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1"
                                    }, [
                                        React.createElement('span', { key: 'low' }, 'ä½å“è³ª'),
                                        React.createElement('span', { key: 'high' }, 'é«˜å“è³ª')
                                    ])
                                ]),

                                // å½¢å¼è¨­å®š
                                React.createElement('div', {
                                    key: 'format-setting'
                                }, [
                                    React.createElement('label', {
                                        key: 'format-label',
                                        className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
                                    }, 'å‡ºåŠ›å½¢å¼'),
                                    React.createElement('select', {
                                        key: 'format-select',
                                        value: format,
                                        onChange: (e) => setFormat(e.target.value),
                                        className: "w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"
                                    }, [
                                        React.createElement('option', { key: 'keep', value: 'keep' }, 'å…ƒã®å½¢å¼ã‚’ä¿æŒ'),
                                        React.createElement('option', { key: 'jpeg', value: 'jpeg' }, 'JPEG'),
                                        React.createElement('option', { key: 'png', value: 'png' }, 'PNG'),
                                        React.createElement('option', { key: 'webp', value: 'webp' }, 'WebP')
                                    ])
                                ]),

                                // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³
                                React.createElement('div', {
                                    key: 'actions',
                                    className: "flex gap-4"
                                }, [
                                    React.createElement('button', {
                                        key: 'resize-btn',
                                        onClick: handleResize,
                                        disabled: isProcessing || !isValidWidth() || !isValidQuality(),
                                        className: `flex-1 px-6 py-3 font-medium rounded-lg transition-colors ${
                                            !isProcessing && isValidWidth() && isValidQuality()
                                                ? 'bg-purple-600 text-white hover:bg-purple-700 dark:bg-purple-500 dark:hover:bg-purple-600'
                                                : 'bg-gray-300 text-gray-500 cursor-not-allowed dark:bg-gray-600 dark:text-gray-400'
                                        }`
                                    }, isProcessing ? 'Processing...' : 'ãƒªã‚µã‚¤ã‚º'),
                                    React.createElement('button', {
                                        key: 'clear-btn',
                                        onClick: handleClear,
                                        className: "px-6 py-3 bg-gray-600 text-white font-medium rounded-lg hover:bg-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 transition-colors"
                                    }, 'ã‚¯ãƒªã‚¢')
                                ])
                            ]),

                            // ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
                            error && React.createElement('div', {
                                key: 'error',
                                className: "mt-4 p-3 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 text-red-700 dark:text-red-300 rounded-lg text-sm"
                            }, error)
                        ]),

                        // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒªã‚¢
                        React.createElement('div', {
                            key: 'preview-area',
                            className: "bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6"
                        }, [
                            React.createElement('div', {
                                key: 'preview-header',
                                className: "flex items-center justify-between mb-6"
                            }, [
                                React.createElement('h2', {
                                    key: 'preview-title',
                                    className: "text-xl font-semibold text-gray-800 dark:text-white"
                                }, 'ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼'),
                                resizedFile && React.createElement('button', {
                                    key: 'download-btn',
                                    onClick: handleDownload,
                                    className: "px-6 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 transition-colors"
                                }, 'ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰')
                            ]),

                            // ç”»åƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
                            React.createElement('div', {
                                key: 'preview-images',
                                className: "space-y-6"
                            }, [
                                // å…ƒç”»åƒ
                                originalPreview && React.createElement('div', {
                                    key: 'original-preview'
                                }, [
                                    React.createElement('h3', {
                                        key: 'original-title',
                                        className: "text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
                                    }, 'å…ƒç”»åƒ'),
                                    React.createElement('div', {
                                        key: 'original-container',
                                        className: "border border-gray-200 dark:border-gray-600 rounded-lg p-4 text-center"
                                    }, [
                                        React.createElement('img', {
                                            key: 'original-img',
                                            src: originalPreview,
                                            alt: 'Original',
                                            className: "max-w-full max-h-48 mx-auto rounded"
                                        }),
                                        React.createElement('p', {
                                            key: 'original-size',
                                            className: "text-sm text-gray-500 dark:text-gray-400 mt-2"
                                        }, `${formatFileSize(originalFile.size)}`)
                                    ])
                                ]),

                                // ãƒªã‚µã‚¤ã‚ºå¾Œç”»åƒ
                                resizedPreview && React.createElement('div', {
                                    key: 'resized-preview'
                                }, [
                                    React.createElement('h3', {
                                        key: 'resized-title',
                                        className: "text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
                                    }, 'ãƒªã‚µã‚¤ã‚ºå¾Œ'),
                                    React.createElement('div', {
                                        key: 'resized-container',
                                        className: "border border-gray-200 dark:border-gray-600 rounded-lg p-4 text-center"
                                    }, [
                                        React.createElement('img', {
                                            key: 'resized-img',
                                            src: resizedPreview,
                                            alt: 'Resized',
                                            className: "max-w-full max-h-48 mx-auto rounded"
                                        }),
                                        React.createElement('p', {
                                            key: 'resized-size',
                                            className: "text-sm text-gray-500 dark:text-gray-400 mt-2"
                                        }, `${formatFileSize(resizedFile.size)}`)
                                    ])
                                ])
                            ]),

                            // ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼
                            !originalPreview && React.createElement('div', {
                                key: 'placeholder',
                                className: "text-center text-gray-500 dark:text-gray-400 py-16"
                            }, 'ç”»åƒã‚’é¸æŠã™ã‚‹ã¨ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™')
                        ])
                    ]),

                    // å±¥æ­´ã‚»ã‚¯ã‚·ãƒ§ãƒ³
                    history.length > 0 && React.createElement('div', {
                        key: 'history-section',
                        className: "bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6"
                    }, [
                        React.createElement('h2', {
                            key: 'history-title',
                            className: "text-xl font-semibold text-gray-800 dark:text-white mb-4"
                        }, 'å‡¦ç†å±¥æ­´ï¼ˆæœ€æ–°3ä»¶ï¼‰'),
                        React.createElement('div', {
                            key: 'history-grid',
                            className: "grid grid-cols-1 md:grid-cols-3 gap-4"
                        },
                            history.map((item, index) =>
                                React.createElement('div', {
                                    key: index,
                                    className: "p-4 border border-gray-200 dark:border-gray-600 rounded-lg"
                                }, [
                                    React.createElement('div', {
                                        key: 'hist-filename',
                                        className: "font-medium text-gray-900 dark:text-white mb-2 truncate"
                                    }, item.resizedName),
                                    React.createElement('div', {
                                        key: 'hist-details',
                                        className: "text-sm text-gray-600 dark:text-gray-400 space-y-1"
                                    }, [
                                        React.createElement('div', { key: 'size' }, `${formatFileSize(item.originalSize)} â†’ ${formatFileSize(item.resizedSize)}`),
                                        React.createElement('div', { key: 'settings' }, `å¹…: ${item.width}px, å“è³ª: ${item.quality}%`),
                                        React.createElement('div', { key: 'time' }, new Date(item.timestamp).toLocaleString())
                                    ])
                                ])
                            )
                        )
                    ])
                ]),

                // é–¢é€£ãƒ„ãƒ¼ãƒ«
                React.createElement(RelatedTools, { key: 'related-tools', currentSlug: 'image-resizer' }),

                // ã‚¹ãƒ”ãƒŠãƒ¼
                isProcessing && React.createElement('div', {
                    key: 'spinner',
                    className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
                }, 
                    React.createElement('div', {
                        className: "bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg flex items-center gap-4"
                    }, [
                        React.createElement('div', {
                            key: 'spinner-icon',
                            className: "animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"
                        }),
                        React.createElement('span', {
                            key: 'spinner-text',
                            className: "text-gray-900 dark:text-white"
                        }, 'ç”»åƒã‚’å‡¦ç†ä¸­...')
                    ])
                ),

                // ãƒˆãƒ¼ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
                downloadMessage && React.createElement('div', {
                    key: 'toast',
                    className: "fixed bottom-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg z-50"
                }, downloadMessage)
            ]);
        };

        ReactDOM.render(React.createElement(ImageResizer), document.getElementById('root'));
    </script>
</body>
</html>